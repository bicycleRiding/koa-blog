(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-editor-editor"],{1389:function(t,e,n){"use strict";n.r(e);var a=n("ae41"),i=n("4c10");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("b545");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"5151b3c6",null,!1,a["a"],r);e["default"]=u.exports},"14bf":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-5151b3c6]{position:-webkit-sticky;position:sticky;z-index:98}",""]),t.exports=e},"154b":function(t,e,n){"use strict";n.r(e);var a=n("4203"),i=n("bdb2");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("30e4");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"45fa1794",null,!1,a["a"],r);e["default"]=u.exports},"22f9":function(t,e,n){"use strict";n.r(e);var a=n("9fab"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},2684:function(t,e,n){var a=n("dab4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("316b997f",a,!0,{sourceMap:!1,shadowMode:!1})},"30e4":function(t,e,n){"use strict";var a=n("b797"),i=n.n(a);i.a},3584:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".page-header[data-v-45fa1794]{height:%?100?%}.back-icon[data-v-45fa1794]{font-size:%?50?%}",""]),t.exports=e},4191:function(t,e,n){"use strict";n.r(e);var a=n("c5bb"),i=n("22f9");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"6a435b9c",null,!1,a["a"],r);e["default"]=u.exports},4203:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-header px-2 flex align-center justify-between"},[t.canBack?n("v-uni-view",{staticClass:"iconfont icon-arrowLeft-fill back-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}):t._e(),n("v-uni-view",{staticClass:"font-lg"},[t._v(t._s(t.title))]),t._t("default")],2)},o=[]},"46aa":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".status-bar[data-v-11bda5a2]{height:0}",""]),t.exports=e},"4c10":function(t,e,n){"use strict";n.r(e);var a=n("e6c3"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"4e3d":function(t,e,n){"use strict";var a=n("bae2"),i=n.n(a);i.a},6546:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{title:{type:String,default:""},canBack:{type:Boolean,default:!0}},methods:{back:function(){uni.navigateBack({delta:1})}}};e.default=a},7186:function(t,e,n){"use strict";var a=n("a303"),i=n.n(a);i.a},"78d5":function(t,e,n){"use strict";var a=n("2684"),i=n.n(a);i.a},"956a":function(t,e,n){"use strict";n.r(e);var a=n("bac0"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"9fab":function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("d81d"),n("d3b7"),n("ac1f"),n("466d"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i,o=a(n("1da1")),r={destroyed:function(){uni.$off("carryTopics")},data:function(){return{topics:[]}},methods:{onMpHtmlLoad:function(){var t=this;i=this.$refs.editor,i.getSrc=function(e,n){return new Promise((function(n,a){var i="img"===e;i&&t.chooseAndUploadImage(n,a)}))}},useToolBar:function(t){var e=i[t];if(e)return e();var n=this[t];if(n)return n.call(this);console.error("该方法editor实例与vue实例都不存在")},carryTopics:function(){var t=this;uni.$once("carryTopics",(function(e){t.topics=e})),uni.navigateTo({url:"/pages/topics/topics"})},confirmRelase:function(){this.$refs.popup.open()},release:function(t){var e=this;return(0,o.default)(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=i.getContent(),o=e.getImages(a),n.prev=2,e.$U.loading(),n.next=6,e.$A.post.create({imgs:o,title:t,content:a,topic_ids:e.topics.map((function(t){return t._id}))});case 6:e.$U.notice("发布成功"),e.$refs.popup.close(),uni.navigateBack(),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0.message);case 14:return n.prev=14,e.$U.hideLoading(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()},getImages:function(t){for(var e=[],n=/<img.*?(?:>|\/>)/gi,a=/src=[\'\"]?([^\'\"]*)[\'\"]?/i,i=t.match(n)||[],o=0;o<i.length;o++){var r=i[o].match(a),c=r[1].replace(/.+\//,"");r[1]&&e.push({id:c,url:r[1]})}return e},chooseAndUploadImage:function(e,n){var a=this;t.chooseAndUploadFile({type:"image",count:1,onChooseFile:function(){a.$U.loading()},success:function(t){var n=t.tempFiles[0].url;e(n),a.$U.notice("上传成功")},fail:function(t){console.error("上传失败",t.message),n()},complete:function(){a.$U.hideLoading()}})}}};e.default=r}).call(this,n("a9ff")["default"])},a0ea:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-3063051f]{width:%?670?%;height:%?90?%}",""]),t.exports=e},a172:function(t,e,n){"use strict";var a;n.r(e);var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"input-bg-color px-4 flex align-center justify-between position-fixed bottom-0 main"},[t._t("default")],2)},r=[],c=(n("78d5"),n("f0c5")),u={},s=Object(c["a"])(u,o,r,!1,null,"406a6559",null,!1,a,i);e["default"]=s.exports},a303:function(t,e,n){var a=n("46aa");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("36c4177c",a,!0,{sourceMap:!1,shadowMode:!1})},a67d:function(t,e,n){"use strict";var a;n.r(e);var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"status-bar"})},r=[],c=(n("7186"),n("f0c5")),u={},s=Object(c["a"])(u,o,r,!1,null,"11bda5a2",null,!1,a,i);e["default"]=s.exports},ae41:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main",style:{top:t.top,backgroundColor:t.backgroundColor}},[t._t("default")],2)},o=[]},af9c:function(t,e,n){"use strict";n.r(e);var a=n("ee63"),i=n("f4a7");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("dfbe");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"3c811fde",null,!1,a["a"],r);e["default"]=u.exports},b545:function(t,e,n){"use strict";var a=n("f79c"),i=n.n(a);i.a},b797:function(t,e,n){var a=n("3584");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("ac08f35a",a,!0,{sourceMap:!1,shadowMode:!1})},b949:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{title:""}},computed:{disabled:function(){var t=this.title.length>0;return!t}},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()}}};e.default=a},bac0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{topics:{type:Array,default:function(){return[]}},bottom:{type:String,default:"100rpx"}}};e.default=a},bae2:function(t,e,n){var a=n("a0ea");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1146e5e7",a,!0,{sourceMap:!1,shadowMode:!1})},bdb2:function(t,e,n){"use strict";n.r(e);var a=n("6546"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},c5bb:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={cSticky:n("1389").default,cStatusBar:n("a67d").default,cPageHeader:n("154b").default,mpHtml:n("b922").default,cEditorTopics:n("fe6b").default,cEditorToolBar:n("a172").default,cEditorReleasePopup:n("af9c").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("c-sticky",[n("c-status-bar"),n("c-page-header",{attrs:{title:"编辑"}})],1),n("mp-html",{ref:"editor",attrs:{"container-style":"padding: 20rpx;",placeholder:"请输入内容",editable:!0},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.onMpHtmlLoad.apply(void 0,arguments)}}}),n("v-uni-view",{staticStyle:{height:"240rpx"}}),n("c-editor-topics",{attrs:{topics:t.topics}}),n("c-editor-tool-bar",{staticClass:"iconfont"},[n("v-uni-view",{staticClass:"icon-chehui",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("undo")}}}),n("v-uni-view",{staticClass:"icon-chehui-copy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("redo")}}}),n("v-uni-view",{staticClass:"icon-wenzi",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("insertText")}}}),n("v-uni-view",{staticClass:"icon-tupian1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("insertImg")}}}),n("v-uni-view",{staticClass:"icon-qingchu1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("clear")}}}),n("v-uni-view",{staticClass:"icon-huati1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("carryTopics")}}}),n("v-uni-view",{staticClass:"icon-release",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useToolBar("confirmRelase")}}})],1),n("c-editor-release-popup",{ref:"popup",on:{release:function(e){arguments[0]=e=t.$handleEvent(e),t.release.apply(void 0,arguments)}}})],1)},o=[]},d07a:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.topics.length>0?n("v-uni-view",{staticClass:"input-bg-color flex align-center position-fixed px-4 main",style:{bottom:t.bottom}},t._l(t.topics,(function(e){return n("v-uni-text",{key:e._id,staticClass:"mx-2"},[t._v("#"+t._s(e.title))])})),1):t._e()},o=[]},dab4:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-406a6559]{width:%?670?%;height:%?100?%;font-size:%?50?%}",""]),t.exports=e},dfbe:function(t,e,n){"use strict";var a=n("ed56"),i=n.n(a);i.a},e6c3:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{top:{type:[String,Number],default:0},backgroundColor:{type:String,default:"white"}}};e.default=a},ed56:function(t,e,n){var a=n("ff19");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("5957f0b8",a,!0,{sourceMap:!1,shadowMode:!1})},ee63:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniPopup:n("280e").default,uniEasyinput:n("15b6").default,cButton:n("cc84").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("uni-popup",{ref:"popup"},[n("v-uni-view",{staticClass:"bg-white p-5 rounded main"},[n("v-uni-view",{staticClass:"position-relative my-2 py-3"},[n("uni-easyinput",{staticClass:"input-bg-color",attrs:{placeholder:"标题","input-border":!1,maxlength:20},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("v-uni-text",{staticClass:"font secondary-color position-absolute right-0"},[t._v("20/"+t._s(t.title.length))])],1),n("c-button",{staticClass:"main-bg-color text-white",attrs:{disabled:t.disabled},on:{"on-tap":function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("release",t.title)}}},[t._v("发布")])],1)],1)},o=[]},f4a7:function(t,e,n){"use strict";n.r(e);var a=n("b949"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},f79c:function(t,e,n){var a=n("14bf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("004170be",a,!0,{sourceMap:!1,shadowMode:!1})},fe6b:function(t,e,n){"use strict";n.r(e);var a=n("d07a"),i=n("956a");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("4e3d");var r,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"3063051f",null,!1,a["a"],r);e["default"]=u.exports},ff19:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-3c811fde]{width:%?600?%}",""]),t.exports=e}}]);