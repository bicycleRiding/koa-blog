(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-user"],{"03ee":function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=a(n("1da1")),u={data:function(){return{loading:!1}},props:{id:{type:String,default:""}},methods:{resolveFollow:function(e){var n=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var a,r,u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.loading||(n.loading=!0,a=t.database(),a.collection("follows"),r=function(t){return n.$U.notice(t)},u=function(){n.id?n.$U.notice("取消关注成功"):n.$U.notice("关注成功")},o=function(){return n.loading=!1},n.$emit("follow",{id:n.id,fail:r,success:u,complete:o}));case 1:case"end":return e.stop()}}),e)})))()}}};e.default=u}).call(this,n("a9ff")["default"])},"0548":function(t,e,n){"use strict";var a=n("8e97"),r=n.n(a);r.a},"0717":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"main",style:{top:t.top,backgroundColor:t.backgroundColor}},[t._t("default")],2)},u=[]},"32e5":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cSticky:n("ab7f").default,cStatusBar:n("7613").default,cPageHeader:n("8b38").default,cImage:n("2e58").default,unicloudDb:n("960d").default,cErrorTip:n("4f57").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("c-sticky",[n("c-status-bar"),n("c-page-header")],1),n("v-uni-view",{staticClass:"m-4 flex"},[n("c-image",{staticClass:"avatar mr-5",attrs:{src:t.post.avatarUrl}}),n("v-uni-view",{staticClass:"p-1 user-container"},[n("v-uni-text",{staticClass:"h2"},[t._v(t._s(t.post.username))]),n("unicloud-db",{ref:"follows",attrs:{collection:"follows","page-size":1,where:"user_id == '"+t.uid+"' && follow_user_id == '"+t.post.authorID+"'"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,r=e.error;return[r?n("v-uni-view",[t._v(t._s(r.message))]):n("v-uni-view",[n("c-follow",{staticClass:"mt-2",attrs:{id:a[0]&&a[0]._id},on:{follow:function(e){arguments[0]=e=t.$handleEvent(e),t.resolveFollow.apply(void 0,arguments)}}})],1)]}}])})],1)],1),n("v-uni-view",{staticClass:"flex",staticStyle:{"justify-content":"space-around"}},[n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.postNum))]),n("v-uni-text",[t._v("帖子")])],1),n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.followNum))]),n("v-uni-text",[t._v("关注")])],1),n("v-uni-view",{staticClass:"flex flex-column align-center"},[n("v-uni-text",{staticClass:"h3"},[t._v(t._s(t.fansNum))]),n("v-uni-text",[t._v("粉丝")])],1)],1),n("v-uni-view",{staticClass:"mt-4"},[n("v-uni-text",{staticClass:"h3 ml-2"},[t._v("近期")]),n("unicloud-db",{ref:"posts",attrs:{collection:"posts,uni-id-users,topics",field:t.field,where:"author._id == '"+t.post.authorID+"'","page-size":4,orderby:"create_date desc"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,r=(e.loading,e.error);e.hasMore;return[r?n("c-error-tip",{attrs:{msg:r.message}}):n("v-uni-view",{staticClass:"flex flex-wrap p-2"},t._l(a,(function(e){return n("c-image",{key:e._id,staticClass:"cover m-2 rounded",attrs:{src:e.cover},on:{"on-tap":function(n){arguments[0]=n=t.$handleEvent(n),t.toPostPage(e)}}})})),1)]}}])})],1)],1)},u=[]},3904:function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=a(n("1da1")),u=a(n("6858")),o={components:{cFollow:u.default},data:function(){var e=t.getCurrentUserInfo(),n=e.uid,a="create_date,arrayElemAt(author.username, 0) as username,arrayElemAt(author._id, 0) as authorID,arrayElemAt(author.avatar, 0) as avatarUrl,title,topic_ids.title as topics,size(praise_user_ids._id) as praiseNum,in('".concat(n,"', praise_user_ids._id) as praiseStatus,size(love_user_ids._id) as loveNum,in('").concat(n,"', love_user_ids._id) as loveStatus,arrayElemAt(imgs.url, 0) as cover");return{uid:n,field:a,post:{},postNum:0,fansNum:0,followNum:0}},onPullDownRefresh:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Promise((function(e){t.$refs.posts.loadData({clear:!0},e)})),a=Promise.all([n,t.count()]),e.next=4,a;case 4:uni.stopPullDownRefresh();case 5:case"end":return e.stop()}}),e)})))()},onLoad:function(){this.post=uni.getStorageSync("userDetail"),this.count()},methods:{count:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.countPost();case 2:return e.next=4,t.countFollow();case 4:return e.next=6,t.countFans();case 6:case"end":return e.stop()}}),e)})))()},countPost:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.post.countPost({author:t.post.authorID});case 3:t.postNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},countFollow:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.follow.countFollow({author:t.post.authorID});case 3:t.followNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},countFans:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$A.follow.countFans({author:t.post.authorID});case 3:t.fansNum=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},resolveFollow:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var a,r,u,o,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.id,r=t.fail,u=t.success,o=t.complete,i=e.$A.follow,s=i.create,c=i.destory,n.prev=2,!a){n.next=8;break}return n.next=6,c({id:a});case 6:n.next=10;break;case 8:return n.next=10,s({follow_user_id:e.post.authorID});case 10:u(),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](2),r(n.t0.message);case 16:return n.prev=16,e.$refs.follows.loadData({clear:!0},o),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[2,13,16,19]])})))()},toPostPage:function(t){uni.setStorageSync("post",t),uni.navigateTo({url:"/pages/post/post"})}}};e.default=o}).call(this,n("a9ff")["default"])},"3d62":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".main[data-v-5151b3c6]{position:-webkit-sticky;position:sticky;z-index:98}",""]),t.exports=e},"4f57":function(t,e,n){"use strict";n.r(e);var a=n("c1d3"),r=n("b97b");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("0548");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"2638a35b",null,!1,a["a"],o);e["default"]=s.exports},5453:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".cover[data-v-2638a35b]{width:%?600?%;height:%?400?%}",""]),t.exports=e},"571f":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{top:{type:[String,Number],default:0},backgroundColor:{type:String,default:"white"}}};e.default=a},5748:function(t,e,n){var a=n("3d62");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("5d294d8c",a,!0,{sourceMap:!1,shadowMode:!1})},6082:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".avatar[data-v-b5946198]{width:%?250?%;height:%?250?%;border-radius:100%}.user-container[data-v-b5946198]{width:%?300?%;height:%?300?%}.cover[data-v-b5946198]{width:%?315?%;height:%?350?%}",""]),t.exports=e},"666c":function(t,e,n){"use strict";var a=n("6b47"),r=n.n(a);r.a},"66e3":function(t,e,n){var a=n("6082");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("311c7c2a",a,!0,{sourceMap:!1,shadowMode:!1})},6858:function(t,e,n){"use strict";n.r(e);var a=n("b1a2"),r=n("b341");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"2f2017c7",null,!1,a["a"],o);e["default"]=s.exports},"6b47":function(t,e,n){var a=n("ed37");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("2dc8f842",a,!0,{sourceMap:!1,shadowMode:!1})},"762a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{title:{type:String,default:""},canBack:{type:Boolean,default:!0}},methods:{back:function(){uni.navigateBack({delta:1})}}};e.default=a},"7b76":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{msg:{type:String,default:""}}};e.default=a},"85d1":function(t,e,n){"use strict";n.r(e);var a=n("b136"),r=n("b745");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"e95d39d4",null,!1,a["a"],o);e["default"]=s.exports},"8a0d":function(t,e,n){"use strict";n.r(e);var a=n("571f"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},"8b38":function(t,e,n){"use strict";n.r(e);var a=n("cf4e"),r=n("ba86");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("666c");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"45fa1794",null,!1,a["a"],o);e["default"]=s.exports},"8e97":function(t,e,n){var a=n("5453");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=n("4f06").default;r("a9090416",a,!0,{sourceMap:!1,shadowMode:!1})},ab7f:function(t,e,n){"use strict";n.r(e);var a=n("0717"),r=n("8a0d");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("ed1c");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"5151b3c6",null,!1,a["a"],o);e["default"]=s.exports},b136:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-button",{staticClass:"vivify duration-150",attrs:{"hover-stay-time":"250","hover-class":"pulsate",disabled:t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$emit("on-tap")}}},[t._t("default")],2)},u=[]},b1a2:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cButton:n("85d1").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("c-button",{staticClass:"px-3 transition-all font-sm",class:t.id?"main-bg-color text-white":"bg-white",on:{"on-tap":function(e){arguments[0]=e=t.$handleEvent(e),t.resolveFollow.apply(void 0,arguments)}}},[t._v(t._s(t.loading?"loading":t.id?"已关注":"关注"))])},u=[]},b341:function(t,e,n){"use strict";n.r(e);var a=n("03ee"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},b745:function(t,e,n){"use strict";n.r(e);var a=n("dde0"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},b97b:function(t,e,n){"use strict";n.r(e);var a=n("7b76"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},ba86:function(t,e,n){"use strict";n.r(e);var a=n("762a"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},bf92:function(t,e,n){"use strict";n.r(e);var a=n("3904"),r=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);e["default"]=r.a},c1d3:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var a={cImage:n("2e58").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"flex flex-column align-center"},[a("c-image",{staticClass:"cover",attrs:{src:n("e333"),mode:"aspectFill"}}),a("v-uni-text",{staticClass:"main-color p-2 careful-bg-color"},[t._v(t._s(t.msg))])],1)},u=[]},cf4e:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-header px-2 flex align-center justify-between"},[t.canBack?n("v-uni-view",{staticClass:"iconfont icon-arrowLeft-fill back-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}):t._e(),n("v-uni-view",{staticClass:"font-lg"},[t._v(t._s(t.title))]),t._t("default")],2)},u=[]},d030:function(t,e,n){"use strict";var a=n("66e3"),r=n.n(a);r.a},d6ff:function(t,e,n){"use strict";n.r(e);var a=n("32e5"),r=n("bf92");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("d030");var o,i=n("f0c5"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"b5946198",null,!1,a["a"],o);e["default"]=s.exports},dde0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{disabled:{type:Boolean,default:!1}}};e.default=a},e333:function(t,e,n){t.exports=n.p+"static/img/empty.e7d3375f.png"},ed1c:function(t,e,n){"use strict";var a=n("5748"),r=n.n(a);r.a},ed37:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".page-header[data-v-45fa1794]{height:%?100?%}.back-icon[data-v-45fa1794]{font-size:%?50?%}",""]),t.exports=e}}]);